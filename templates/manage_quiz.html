{% extends "base.html" %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Manage: {{ quiz.title }}</h3>
    <span class="badge bg-info">‚è± {{ quiz.duration_minutes }} min</span>
  </div>
  <div class="card p-3 mb-3">
  <h5>Edit Quiz Details</h5>
  <form method="post" action="{{ url_for('update_quiz', quiz_id=quiz.id) }}">
    <div class="mb-2">
      <label class="form-label">Quiz Title</label>
      <input type="text" name="title" class="form-control" value="{{ quiz.title }}" required>
    </div>
    <div class="mb-2">
      <label class="form-label">Duration (minutes)</label>
      <input type="number" name="duration_minutes" class="form-control" value="{{ quiz.duration_minutes }}" min="1">
    </div>
    <button type="submit" class="btn btn-primary btn-sm">Update</button>
  </form>
</div>
  <div class="row g-3">
    <div class="col-md-5">
      <div class="card p-3">
        <h5 class="mb-3">Add Question</h5>
        <form method="post">
          <div class="mb-2">
            <label class="form-label">Question</label>
            <input name="text" class="form-control" required>
          </div>
          <div class="row g-2">
            <div class="col-6"><input name="option_a" class="form-control" placeholder="Option A" required></div>
            <div class="col-6"><input name="option_b" class="form-control" placeholder="Option B" required></div>
            <div class="col-6"><input name="option_c" class="form-control" placeholder="Option C" required></div>
            <div class="col-6"><input name="option_d" class="form-control" placeholder="Option D" required></div>
          </div>
          <div class="mt-2">
            <label class="form-label">Correct Answer</label>
            <select name="correct" class="form-select" required>
              <option value="A">A</option>
              <option value="B">B</option>
              <option value="C">C</option>
              <option value="D">D</option>
            </select>
          </div>
          <button class="btn btn-primary mt-3">Add Question</button>
        </form>
      </div>
    </div>
    <div class="col-md-7">
      <div class="card p-3">
        <h5 class="mb-3">Questions ({{ quiz.questions|length }})</h5>
        <div class="table-responsive">
          <table class="table align-middle">
            <thead>
              <tr><th>#</th><th>Question</th><th>Correct</th><th class="text-end">Actions</th></tr>
            </thead>
            <tbody>
              {% for q in quiz.questions %}
                <tr>
                  <td>{{ loop.index }}</td>
                  <td>{{ q.text }}</td>
                  <td><span class="badge bg-success">{{ q.correct }}</span></td>
                  <td class="text-end">
                    <a class="btn btn-warning btn-sm" href="{{ url_for('edit_question', question_id=q.id) }}">Edit</a>
                    <form method="post" action="{{ url_for('delete_question', question_id=q.id) }}" style="display:inline;">
                      <button class="btn btn-danger btn-sm" onclick="return confirm('Delete question?')">Delete</button>
                    </form>
                  </td>
                </tr>
              {% else %}
                <tr><td colspan="4" class="text-center text-muted">No questions yet.</td></tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
{% endblock %}